{"mappings":"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","sources":["src/mobile/index.js"],"sourcesContent":["let ready = false;\n\nvar commandsPool = [];\n\nconst getAverage = () => {\n  commandsPool = commandsPool.slice(\n    commandsPool.length - 20,\n    commandsPool.length\n  );\n\n  console.log(\"COMMANDS_POOL\", commandsPool);\n\n  const sum = commandsPool.reduce((a, b) => a + b, 0);\n  const avg = sum / commandsPool.length || 0;\n\n  return avg;\n};\n\nvar playerHuman;\nvar humanForceLeft = 0;\nvar humanForceRight = 0;\n\nconst hasDebug = true;\n\nwindow.onload = function () {\n  const noSleep = new NoSleep();\n  noSleep.disable();\n  const socket = io();\n  const button = document.getElementById(\"bt-cta-basic\");\n\n  if (isMobile()) {\n    window.addEventListener(\"resize\", (e) => {\n      var myElement = document.getElementById(\"data-player-name\");\n      if (myElement === document.activeElement) {\n        //myElement Has Focus\n        console.log(\"KEYBOARD_OPEN\");\n      } else {\n        console.log(\"KEYBOARD_CLOSE\");\n      }\n    });\n\n    function handleOrientation(e) {\n      if (ready) {\n        // socket.emit(\"orientation\", e.gamma);\n        const val = e.gamma;\n\n        commandsPool.push(val);\n\n        if (val > 0) {\n          humanForceRight = val;\n          humanForceLeft = 0;\n        } else {\n          humanForceLeft = Math.abs(val);\n          humanForceRight = 0;\n        }\n\n        const direcionalRight = document.getElementById(\"direcional-right\");\n        const direcionalLeft = document.getElementById(\"direcional-left\");\n        if (direcionalRight) {\n          if (humanForceRight > 0) {\n            direcionalLeft.style.opacity = 0.3;\n          } else {\n            let leftCalc = Math.abs(humanForceLeft / 100);\n            direcionalLeft.style.opacity = leftCalc > 0.3 ? leftCalc : 0.3;\n          }\n\n          if (humanForceLeft > 0) {\n            direcionalRight.style.opacity = 0.3;\n          } else {\n            let rightCalc = Math.abs(humanForceRight / 100);\n            direcionalRight.style.opacity = rightCalc > 0.3 ? rightCalc : 0.3;\n          }\n        }\n\n        clearTimeout(playerHuman);\n        playerHuman = setTimeout(() => {\n          console.log(\"ORIENTATION_SENT\", e);\n\n          const avg = getAverage();\n\n          console.log(\"AVERAGE\", avg);\n\n          socket.emit(\"orientation\", avg);\n\n          if (hasDebug && document.getElementById(\"footer-debug\")) {\n            document.getElementById(\n              \"footer-debug\"\n            ).innerHTML = `forceLeft = ${humanForceLeft} <br> forceRight = ${humanForceRight}`;\n          }\n        }, 10);\n\n        console.log(\"GAMA_MOBILE\", e.gamma);\n      }\n    }\n\n    window.addEventListener(\"deviceorientation\", handleOrientation, true);\n    button.addEventListener(\"click\", enableNoSleep, false);\n\n    function enableNoSleep() {\n      socket.emit(\"mobile connected\");\n      socket.on(\"start\", () => (ready = true));\n      noSleep.enable();\n      button.removeEventListener(\"touchstart\", enableNoSleep, false);\n    }\n  }\n};\n\nconst isMobile = () => {\n  if (\n    /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(\n      navigator.userAgent\n    ) ||\n    /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n      navigator.userAgent.substr(0, 4)\n    )\n  )\n    return true;\n\n  return false;\n};\n"],"names":[],"version":3,"file":"index.4655a0b2.js.map","sourceRoot":"/__parcel_source_root/"}